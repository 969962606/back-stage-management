webpackJsonp([13],{"1eGY":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("mvHQ"),s=o.n(n),a=o("Dd8w"),l=o.n(a),c=o("M9A7"),r=o("NYxO"),i={methods:l()({},Object(r.b)(["login"]),{getUser:function(){console.log("用户确认");var e={code:this.$route.query.code};Object(c.a)(e).then(function(e){console.log(e,"response")})},login:function(){var e=document.URL,t=new Object;if(-1!=e.indexOf("?")){for(var o=e.substr(1).split("?")[1].split("&"),n=0;n<o.length;n++)t[o[n].split("=")[0]]=unescape(o[n].split("=")[1]);var a={code:t.code};Object(c.a)(a).then(function(e){if(console.log("response",e),e.data.resultStatus){localStorage.setItem("resultData",s()(e.data.resultData));var t=e.data.resultData.accessToken;localStorage.setItem("accessToken",t),localStorage.setItem("allPermissions",e.data.resultData.permissions.split(";")),window.location.href="/#/index"}else console.log("扫码登录失败")})}}}),created:function(){console.log("URL",document.URL),this.login()},watch:{$route:"getUrlParam"},beforeRouteUpdate:function(e,t,o){console.log("扫码登录了",e.path);var n=document.URL,a=new Object;if(-1!=n.indexOf("?")){for(var l=n.substr(1).split("?")[1].split("&"),r=0;r<l.length;r++)a[l[r].split("=")[0]]=unescape(l[r].split("=")[1]);var i={code:a.code};Object(c.a)(i).then(function(e){e.resultStatus?(localStorage.setItem("resultData",s()(e.resultData)),window.location.href="/#/index"):console.log("扫码登录失败")})}o()}},u={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},d=o("VU/8")(i,u,!1,null,null,null);t.default=d.exports},M9A7:function(e,t,o){"use strict";t.a=function(e){return Object(n.a)({url:"/v1/platform/code2session",method:"post",data:e})};var n=o("vLgD")}});